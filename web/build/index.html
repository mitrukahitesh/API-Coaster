<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
      integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./style/style.css" />
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
        <path
          d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
        />
      </symbol>
      <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
        <path
          d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"
        />
      </symbol>
      <symbol
        id="exclamation-triangle-fill"
        fill="currentColor"
        viewBox="0 0 16 16"
      >
        <path
          d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"
        />
      </symbol>
    </svg>
    <title>API Coaster</title>
  </head>

  <body style="overflow: hidden">
    <nav class="navbar fixed-top navbar-light bg-light border-bottom" nav-bar>
      <div class="container-fluid ps-4">
        <div class="row align-items-center flex-grow-1 text-center" nav-bar-row>
          <div class="col">
            <a class="navbar-brand" href="#">
              <img
                alt=""
                width="40"
                height="40"
                class="d-inline-block align-text-center"
                style="border-radius: 50%"
                user-dp
              />
              <span user-name class="navbar-text ms-3"></span>
            </a>
          </div>
          <div
            class="col-3 col-lg-3 col-md-2 col-xl-1 hoverEffect"
            sign-out-button
          >
            <i class="fas fa-sign-out-alt fa-1x"></i>
            <span user-name class="navbar-text ms-1">Sign Out</span>
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid" style="padding-top: 56px">
      <div class="row">
        <div
          class="col-md-4 col-xl-3 pt-4 border-end"
          style="overflow-y: auto; height: 100vh; padding-bottom: 10vh"
        >
          <div
            class="
              row
              border-bottom
              pb-1
              ps-lg-3
              align-items-center
              overflow-hidden
            "
          >
            <div class="col-md-6 col-lg-7">
              <i class="far fa-folder fa-1x"></i>
              <span class="ms-1">My Workspace</span>
            </div>
            <div class="col-2 px-md-1 px-lg-0 pb-1">
              <button
                class="btn btn-secondary btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#modalNew"
              >
                New
              </button>
            </div>
            <div class="col-2 pb-1">
              <button
                class="btn btn-secondary btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#modalImport"
              >
                Import
              </button>
            </div>
          </div>

          <!-- Collection list -->
          <div collection-list></div>

          <div
            sign-in-button
            class="s12 m6 offset-m3 center-align google-button mx-auto"
            style="margin-top: 40%"
          >
            <div class="oauth-container btn darken-4 white black-text">
              <img
                width="20px"
                style="margin-right: 8px"
                alt="Google sign-in"
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png"
              />
              Login with Google
            </div>
          </div>
        </div>

        <div
          class="col-xl-9 col-md-8 p-4"
          style="overflow-y: auto; max-height: 90vh"
        >
          <form data-form>
            <div class="input-group mb-4">
              <select class="form-select flex-grow-0 w-auto" data-method>
                <option value="GET" selected>GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
                <option value="PATCH">PATCH</option>
                <option value="OPTIONS">OPTIONS</option>
              </select>
              <input
                required
                class="form-control"
                placeholder="https://example.com/api/"
                type="url"
                data-url
              />
              <button type="submit" class="btn btn-primary">
                <span
                  request-loading
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                  style="display: none"
                ></span>
                <span>Send</span>
              </button>
            </div>

            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="query-params-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#query-params"
                  type="button"
                  role="tab"
                  aria-controls="query-params"
                  aria-selected="true"
                >
                  Query Params
                </button>
              </li>

              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="request-headers-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#request-headers"
                  type="button"
                  role="tab"
                  aria-controls="request-headers"
                  aria-selected="false"
                >
                  Headers
                </button>
              </li>

              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="request-body-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#request-body"
                  type="button"
                  role="tab"
                  aria-controls="request-body"
                  aria-selected="false"
                >
                  JSON
                </button>
              </li>
            </ul>

            <div class="tab-content p-3 border-top-0 border">
              <div
                class="tab-pane fade show active"
                id="query-params"
                role="tabpanel"
                aria-labelledby="query-params-tab"
              >
                <div data-query-params></div>
                <button
                  data-add-query-param-btn
                  class="mt-2 btn btn-outline-success"
                  type="button"
                >
                  Add
                </button>
              </div>

              <div
                class="tab-pane fade"
                id="request-headers"
                role="tabpanel"
                aria-labelledby="request-headers-tab"
              >
                <div data-request-headers></div>
                <button
                  data-add-request-header-btn
                  class="mt-2 btn btn-outline-success"
                  type="button"
                >
                  Add
                </button>
              </div>

              <div
                class="tab-pane fade"
                id="request-body"
                role="tabpanel"
                aria-labelledby="request-body-tab"
              >
                <div
                  data-json-request-body
                  class="overflow-auto"
                  style="max-height: 200px"
                ></div>
              </div>
            </div>
          </form>

          <div class="mt-5" data-response-section>
            <h3>Response</h3>
            <div class="d-flex my-2">
              <div class="me-3">Status: <span data-status></span></div>
              <div class="me-3">Time: <span data-time></span>ms</div>
              <div class="me-3">Size: <span data-size></span></div>
            </div>

            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="response-headers-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#response-headers"
                  type="button"
                  role="tab"
                  aria-controls="response-headers"
                  aria-selected="true"
                >
                  Headers
                </button>
              </li>

              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="response-body-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#response-body"
                  type="button"
                  role="tab"
                  aria-controls="response-body"
                  aria-selected="false"
                >
                  Body
                </button>
              </li>

              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="response-full-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#response-full"
                  type="button"
                  role="tab"
                  aria-controls="response-full"
                  aria-selected="false"
                >
                  Full
                </button>
              </li>
            </ul>

            <div class="tab-content p-3 border-top-0 border">
              <div
                class="tab-pane fade show active"
                id="response-headers"
                role="tabpanel"
                aria-labelledby="response-headers-tab"
              >
                <div
                  data-response-headers
                  style="
                    display: grid;
                    grid-template-columns: auto 1fr;
                    gap: 0.5rem 2rem;
                  "
                ></div>
              </div>

              <div
                class="tab-pane fade"
                id="response-body"
                role="tabpanel"
                aria-labelledby="response-body-tab"
              >
                <div
                  data-json-response-body
                  class="overflow-auto"
                  style="max-height: 250px"
                ></div>
              </div>

              <div
                class="tab-pane fade"
                id="response-full"
                role="tabpanel"
                aria-labelledby="response-full-tab"
              >
                <div
                  data-json-response-full
                  class="overflow-auto"
                  style="max-height: 250px"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modals -->

    <!-- For creating collection -->
    <div
      class="modal fade"
      id="modalNew"
      tabindex="-1"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalNewLabel">New Collection</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form new-collection-form>
              <div class="input-group mb-4">
                <input
                  new-collection-name
                  required
                  class="form-control"
                  placeholder="New Collection Name"
                  type="text"
                />
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="submit" class="btn btn-success">Create</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- For importing collection -->
    <div
      class="modal fade"
      id="modalImport"
      tabindex="-1"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalImportLabel">Import Collection</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form import-collection-form>
              <div class="input-group mb-4">
                <input
                  import-collection-url
                  required
                  class="form-control"
                  placeholder="https://example.com/api"
                  type="url"
                />
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="submit" class="btn btn-success">Import</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- For showing success alerts -->
    <div class="modal" tabindex="-1" id="successAlertModal">
      <div class="modal-dialog">
        <div class="modal-body">
          <div
            class="alert alert-success d-flex align-items-center"
            role="alert"
          >
            <svg
              class="bi flex-shrink-0 me-2"
              width="24"
              height="24"
              role="img"
              aria-label="Success:"
            >
              <use xlink:href="#check-circle-fill" />
            </svg>
            <div class="ms-3">Success</div>
          </div>
        </div>
      </div>
    </div>

    <!-- For showing error alerts -->
    <div class="modal" tabindex="-1" id="errorAlertModal">
      <div class="modal-dialog">
        <div class="modal-body">
          <div
            class="alert alert-danger d-flex align-items-center"
            role="alert"
          >
            <svg
              class="bi flex-shrink-0 me-2"
              width="24"
              height="24"
              role="img"
              aria-label="Danger:"
            >
              <use xlink:href="#exclamation-triangle-fill" />
            </svg>
            <div class="ms-3">Error</div>
          </div>
        </div>
      </div>
    </div>

    <!-- For showing sign in alerts -->
    <div class="modal" tabindex="-1" id="signinAlertModal">
      <div class="modal-dialog">
        <div class="modal-body">
          <div
            class="alert alert-warning d-flex align-items-center"
            role="alert"
          >
            <svg
              class="bi flex-shrink-0 me-2"
              width="24"
              height="24"
              role="img"
              aria-label="Warning:"
            >
              <use xlink:href="#exclamation-triangle-fill" />
            </svg>
            <div>Please Sign In</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates -->

    <!-- For making request -->
    <template data-key-value-template>
      <div class="input-group mt-2" data-key-value-pair>
        <input type="text" data-key class="form-control" placeholder="Key" />
        <input
          type="text"
          data-value
          class="form-control"
          placeholder="Value"
        />
        <button type="submit" data-remove-btn class="btn btn-outline-danger">
          Remove
        </button>
      </div>
    </template>

    <!-- For displaying collection name -->
    <template collection-name-template>
      <div root-collection>
        <div
          collection-container
          class="mt-2"
          style="display: flex; flex-direction: row; align-items: center"
        >
          <div style="flex: 1" collection-name-chevron>
            <i collection-chevron class="fas fa-chevron-right"></i>
            <span collection-name class="ms-2" style="flex: 1"></span>
          </div>
          <div class="dropdown menu-hover" menu-collection>
            <div
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              style="height: 1.5rem; width: 1.5rem"
            >
              <i class="fas fa-ellipsis-v"></i>
            </div>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li><div class="dropdown-item">Share</div></li>
              <li><div class="dropdown-item text-success">Add request</div></li>
              <li>
                <div class="dropdown-item text-danger" delete-collection>
                  Delete
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div request-list style="display: none"></div>
      </div>
    </template>

    <!-- For displaying api name -->
    <template request-name-template>
      <div
        request-container
        class="mt-1"
        style="
          display: flex;
          align-items: center;
          min-height: 1.5rem;
          flex-direction: row;
        "
      >
        <div style="flex: 1; display: flex" request-name-method>
          <span
            request-method
            class="ms-2 text-success"
            style="font-size: small; width: 50px; text-align: end"
          ></span>
          <span
            request-name
            class="ms-2"
            style="flex: 1; font-size: small"
          ></span>
        </div>
        <div class="dropdown menu-hover" menu-request>
          <div
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="height: 1.5rem; width: 1.5rem"
          >
            <i class="fas fa-ellipsis-v"></i>
          </div>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            <!-- <li><div class="dropdown-item">Share</div></li>
            <li><div class="dropdown-item text-success">Add request</div></li> -->
            <li>
              <div class="dropdown-item text-danger" delete-request>Delete</div>
            </li>
          </ul>
        </div>
      </div>
    </template>

    <script src="./script/script.js" type="module"></script>
    <script src="./script/collection-list.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
    <script src="./script/firebase.js" type="module"></script>
    <script src="./script/signin.js" type="module"></script>
    <script src="./script/constants.js" type="module"></script>
    <script src="./script/constant-elements.js" type="module"></script>
    <script src="./script/modals.js" type="module"></script>
  </body>
</html>
